name: Deploy Prod
on:
  workflow_dispatch:
jobs:
  deploy-prod:
    name: Deploy
    runs-on: ubuntu-latest
    environment: development

    steps:
    - name: Check out code
      uses: actions/checkout@v2

    - name: Check if ref is a tag
      id: check_tag
      run: echo ::set-output name=is_tag::$(echo "${{ startsWith(github.ref, 'refs/tags/') }}")

    - name: Fail if ref is not a tag
      if: steps.check_tag.outputs.is_tag != 'true'
      run: exit 1

    - name: Print Tag/Branch Name
      if: steps.check_tag.outputs.is_tag == 'true'
      run: |
       echo "Triggered tag name: ${{ github.ref }}"
